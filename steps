start mysql
got to mysql-5xxx directory
run:
./start

uploaded hatecrime data to projects dir
unzip hate_crime.zip

will try to load hatecrime data into mysql

first I will make a new database
connect as root
create database hate_crimes
GRANT ALL ON hate_crimes.* to 'whoever'@'silo.cs.indiana.edu'

check that works
user is whoever, not my pw
clean that up
REVOKE ALL ...
GRANT ALL ON hate_crimes.* to 'whoever'@'silo.cs.indiana.edu' and ...soic...

test it
log in as whoever
use hate_crimes
works!!!

socket
/u/ejblom/a348-spr2018-workspace/mysql/mysql.sock

trying mysqlimport, but it's not working
using maketable file
it's not finding my socket file which is there
when I do ls /u/ejblom/a348-spr2018-workspace/mysql/mysql.sock
etc. it says it's there and has all permisisons

tried using ~/a348-spr2018-workspace/mysql/mysql.sock


I also don't know how to format column names so they're read properly
i get this now
command not found

have column names separated by commas, no other punctuation
i've tried putting the whole string in double quotes and putting each name
in double quotes
could try each in single quotes

issue was a space after a \
I added a port, --password flag host 

I get an error
Error: 1064, You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1, when using table: hate_crime

OK now I have to create a tbale first
otherwise it's working
using user root
said whoever didn't have permissions
Error: 1064, You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1, when using table: hate_crime

that was from a comma at the end of the column names list
now I need to make a table

made a table, see creat table!

did it!
hate_crimes.hate_crime: Records: 186859  Deleted: 0  Skipped: 0  Warnings: 5418911

I had to create a table
move the csv to mysql/hate_crimes dir
for some reason
then change permissions, I just set to 777
now it's in!!!!

it's all blank, though
dropped table
trying without charset

still all null
damnit

I get 5418911 warnings

got some data in there finally
sqlimport assumes tab separated values

so I added 
--fields-terminated-by=,

something is still not right
i tried
MySQL [hate_crimes]> SELECT Count(INCIDENT_ID), BIAS_DESC FROM hate_crime GROUP BY BIAS_DESC;

and it returned only bias desc and count of incies headers
but there were locations and types of crimes mixed in with the bias desc
so something is wrong

could try specifying charset

I did get about 1.6 million warnings on the last time
that's better than 5.4 million
but it's still a problem
that's about 8.8 per record
hmm

added
  --fields-terminated-by=',' \ 
  --fields-optionally-enclosed-by='"' \

first line I just added ' around the comma
second line is all new
let's try it again

dropped table
and am running maketable again

it look slike it only loaded baout half the records
hate_crimes.hate_crime: Records: 93430  Deleted: 0  Skipped: 0  Warnings: 280295

dunno why
dates did not load right...
but looking at the first record, otherwise it all loaded ok
will try a simple count

that works!!!
but still only half the data is loading
 
trying adding fields terminated by '\r\n'

this looks promising
 Records: 186859  Deleted: 0  Skipped: 0  Warnings: 186873

so it works, at least it looks like it does
I got a group by bias desc to work, looks great

TODO:
get dates loaded right
convert bias description to be a set of columns, one for each bias and true and false for each

TODO
try making dates a varchar(10) or something

Worked
hate_crimes.hate_crime: Records: 186859  Deleted: 0  Skipped: 0  Warnings: 14

14 warnings might be varchar fields that overflowed lengths


made a user 'hate_crimes' with password 'hate_crimes'
made connect_as_hate_crimes file
tried to grant select privileges only on hate_crimes.hate_crime
ok it works
select count(incident_id) from hate_crime;
worked
now try to make a page that does that

test in datadownlow works
test1 will do a count of records and print

jan 8, 2019
must use this shebang
#!/usr/bin/env python3

and it works as long as it's valid python 3
i'll try that simple sql test

Jan. 13
making tables for bias_desc
location_name
offense_name
victim_types

in python, splitting those fields on ';' and making new tables with 
incident id and those fields

first going into sql and making new tables

CREATE TABLE bias_desc (
    INCIDENT_ID int(11),
    BIAS_DESC varchar(100)
);

CREATE TABLE location_name (
    INCIDENT_ID int(11),
    LOCATION_NAME varchar(100)
);

CREATE TABLE offense_name (
    INCIDENT_ID int(11),
    OFFENSE_NAME varchar(120)
);

CREATE TABLE victim_types (
    INCIDENT_ID int(11),
    VICTIM_TYPES varchar(100)
);

created empty tables

connection working with sql alchemy
make enw hate_crimes_admin user for hate_crimes db
grant all privileges

CREATE USER 'hc_admin'@'silo.cs.indiana.edu' IDENTIFIED BY 'ThinkPadacerDELL';

GRANT ALL PRIVILEGES ON hate_crimes.* TO hc_admin'@'silo.cs.indiana.edu';

did those two commans
will try new engine connecting as admin
had problems
did this:
CREATE USER 'hc_admin1'@'silo.soic.indiana.edu' IDENTIFIED BY 'ThinkPadacerDELL';

GRANT ALL PRIVILEGES ON hate_crimes.* TO 'hc_admin1'@'silo.soic.indiana.edu';

ran python code; it worked!!!

ran python for three more tables and it all worke
so now there are victim_types, location_name and offense_name and bias_desc
all broken out
can link by incident ID

